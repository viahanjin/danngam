# 🎨 당나무(Danngam) 프론트엔드 스프린트 계획

**작성일**: 2026-02-15
**스프린트**: Sprint F-1 (로그인 화면 개발)
**팀 구성**: 기획자 1명, 개발자 1명, 테스터 1명
**예상 기간**: 2026-02-22 ~ 2026-02-25 (4일)

---

## 📊 백엔드 vs 프론트엔드 일정

### 타임라인

```
2026-02-15 (금)
├─ 백엔드: A-5 기획 완료 ✅
└─ 프론트엔드: F-1 기획 완료 ✅

2026-02-16~18 (토~월)
├─ 백엔드: A-5 개발 (장비 API) ⏳
└─ 프론트엔드: 대기 (백엔드 완료 기다리는 중)

2026-02-19 (화)
├─ 백엔드: A-5 테스트
└─ 프론트엔드: 대기

2026-02-20 (수)
├─ 백엔드: A-5 최종 검증 ✅ 예정
└─ 프론트엔드: 대기

2026-02-21 (목)
├─ 백엔드: A-5 완료 ✅
└─ 프론트엔드: 준비 시작

2026-02-22 (금) ~ 2026-02-25 (월)
├─ 백엔드: A-6 또는 B-1 (예약 API)
└─ 프론트엔드: F-1 개발 (로그인 화면) ⏳
```

**핵심**: 백엔드 A-5가 완료되어야 프론트엔드 F-1 개발 시작 가능!

---

## 👥 팀 구성

### 역할 정의

#### 기획자 (Planner)
**목표**: Flutter 화면 요구사항 명확화

**이번 스프린트 작업**:
- ✅ F-1 기획서 작성 (Flutter_Phase_F1_기획서.md)
- ✅ 화면 플로우 정의 (Wireframe)
- ✅ 각 화면 요구사항 정의
- ⏳ 디자인 시안 검토 (선택사항)
- ⏳ API 명세 검증 (백엔드와 동일한가?)

**산출물**:
- Flutter_Phase_F1_기획서.md ✅
- 화면 플로우
- 인수 기준 정의

---

#### 개발자 (Developer)
**목표**: Flutter로 화면 구현

**이번 스프린트 작업** (예상 10시간):

| Task | 내용 | 시간 | 기간 |
|------|------|------|------|
| F1-1 | SplashScreen 수정 | 1h | 2/22 |
| F1-2 | OnboardingScreen 수정 | 1h | 2/22 |
| F1-3 | SocialLoginScreen 수정 | 1h | 2/22 |
| F1-4 | PhoneOtpScreen 생성 | 3h | 2/23 |
| F1-5 | API 연동 + 테스트 | 2h | 2/24 |
| F1-6 | 에러 처리 + 개선 | 2h | 2/25 |

---

**Task F1-1: SplashScreen 수정** (1시간)

```dart
목표: 토큰 확인 로직 추가

요구사항:
- SharedPreferences에서 토큰 로드
- 토큰 있으면 AuthProvider.setToken() 호출
- 토큰 없으면 온보딩 화면으로

코드:
lib/modules/auth/screens/splash_screen.dart
```

**체크리스트**:
- [ ] SharedPreferences 의존성 추가 (pubspec.yaml)
- [ ] _checkAuthentication() 메서드 구현
- [ ] initState에서 호출
- [ ] 토큰 로드 로직
- [ ] 화면 전환 로직
- [ ] 2초 딜레이

---

**Task F1-2: OnboardingScreen 수정** (1시간)

```dart
목표: 페이지 플로우 완성

요구사항:
- 3개 페이지 (이미지 + 텍스트)
- 페이지 인디케이터
- [다음] [건너뛰기] 버튼
- 마지막 페이지 [시작]

코드:
lib/modules/auth/screens/onboarding_screen.dart
```

**체크리스트**:
- [ ] PageView 구현
- [ ] 페이지 인디케이터 UI
- [ ] 버튼 로직
- [ ] 마지막 페이지 조건 처리
- [ ] 화면 전환 (로그인으로)

---

**Task F1-3: SocialLoginScreen 수정** (1시간)

```dart
목표: UI 개선 + 레이아웃 수정

요구사항:
- 카카오 로그인 버튼
- 휴대폰 로그인 버튼
- 약관 동의 텍스트
- 로딩 상태 표시

코드:
lib/modules/auth/screens/social_login_screen.dart
```

**체크리스트**:
- [ ] 버튼 레이아웃
- [ ] 카카오 로그인 버튼 클릭 → _loginWithKakao()
- [ ] 휴대폰 로그인 버튼 → /phone-input 이동
- [ ] 로딩 표시 (isLoading)
- [ ] 에러 메시지 표시

---

**Task F1-4: PhoneOtpScreen 생성** (3시간)

```dart
목표: 새로운 화면 생성 - 휴대폰 입력 + OTP 입력

요구사항:
- 휴대폰 입력 필드 (010-0000-0000 형식)
- [OTP 받기] 버튼
- 상태 전환: 휴대폰 입력 → OTP 입력
- OTP 입력 필드 (6자리)
- 3분 타이머
- [다시 받기] 버튼
- [확인] 버튼

API 연동:
- POST /api/v1/auth/send-otp
- POST /api/v1/auth/verify-otp

코드:
lib/modules/auth/screens/phone_otp_screen.dart
```

**체크리스트**:
- [ ] 파일 생성
- [ ] import 추가 (timer, shared_preferences 등)
- [ ] 상태 변수 정의 (_showOtpInput, _isLoading, _remainingSeconds)
- [ ] 휴대폰 입력 UI (_buildPhoneInput())
- [ ] OTP 입력 UI (_buildOtpInput())
- [ ] 휴대폰 형식 검증
- [ ] 타이머 로직
- [ ] API 호출 (_sendOtp(), _verifyOtp())
- [ ] 토큰 저장 (SharedPreferences)
- [ ] 에러 처리

---

**Task F1-5: API 연동 + 테스트** (2시간)

```dart
목표: 모든 API 연동 확인 및 통합 테스트

작업:
1. AuthService 수정
   - sendOtp(phone) 메서드
   - verifyOtp(phone, otp) 메서드

2. API 응답 모델
   - SendOtpResponse
   - VerifyOtpResponse

3. 통합 테스트
   - 신규 사용자 흐름
   - 기존 사용자 흐름

코드:
lib/modules/auth/services/auth_service.dart
lib/modules/auth/models/send_otp_response.dart
lib/modules/auth/models/verify_otp_response.dart
```

**체크리스트**:
- [ ] AuthService 메서드 구현
- [ ] Response 모델 클래스
- [ ] API 엔드포인트 확인
- [ ] 요청/응답 JSON 형식 확인
- [ ] 에러 처리 로직
- [ ] Postman으로 API 테스트 (백엔드와 동일)

---

**Task F1-6: 에러 처리 + 개선** (2시간)

```dart
목표: 사용자 경험 개선

작업:
1. 에러 메시지 한글화
2. 로딩 애니메이션
3. 키보드 처리
4. 포커스 관리
5. 유효성 검사 실시간
6. 코드 리뷰

코드:
- 모든 화면에서 에러 처리
- 로딩 상태 표시
- 스켈레톤 UI 고려
```

**체크리스트**:
- [ ] 에러 메시지 정의 (app_strings.dart)
- [ ] 400 오류 처리
- [ ] 401 오류 처리
- [ ] 429 오류 처리
- [ ] 500 오류 처리
- [ ] 로딩 표시 (CircularProgressIndicator)
- [ ] 키보드 자동 닫기
- [ ] 포커스 이동 (숫자만 입력 등)
- [ ] 주석 추가
- [ ] PEP-equivalent 스타일 확인

---

#### 테스터 (Tester)
**목표**: 화면 동작 완벽 검증

**이번 스프린트 작업** (예상 4시간):

```
2026-02-24 (월): 테스트 케이스 작성
2026-02-25 (화): 실제 테스트 + 버그 리포트
```

---

**테스트 케이스** (20개):

| # | 항목 | 시나리오 | 예상 결과 |
|---|------|---------|---------|
| 1 | 스플래시 | 앱 실행 | 2초 후 다음 화면 |
| 2 | 스플래시 | 토큰 있음 | 메인 화면 이동 |
| 3 | 스플래시 | 토큰 없음 | 온보딩 화면 이동 |
| 4 | 온보딩 | 1→2→3 스와이프 | 페이지 변경 |
| 5 | 온보딩 | [다음] 클릭 | 다음 페이지 |
| 6 | 온보딩 | [건너뛰기] 클릭 | 로그인 화면 |
| 7 | 로그인 | [카카오 로그인] | 카카오 앱/웹으로 이동 |
| 8 | 로그인 | [휴대폰 로그인] | 휴대폰 입력 화면 |
| 9 | OTP | 휴대폰 입력 | 형식 검증 |
| 10 | OTP | 잘못된 형식 | 에러 메시지 |
| 11 | OTP | [OTP 받기] | API 호출 |
| 12 | OTP | OTP 화면 전환 | 타이머 시작 |
| 13 | OTP | 6자리 입력 | 입력 필드 |
| 14 | OTP | [확인] | API 호출 |
| 15 | OTP | 성공 | 토큰 저장 + 메인 화면 |
| 16 | OTP | OTP 불일치 | 에러 메시지 |
| 17 | OTP | OTP 만료 | "다시 받기" 메시지 |
| 18 | OTP | 레이트 리미팅 | 429 오류 처리 |
| 19 | 통합 | 전체 흐름 | 신규 사용자 완전 로그인 |
| 20 | 통합 | 앱 재시작 | 토큰 유지, 메인 화면 |

---

**테스트 환경**:
- 안드로이드 에뮬레이터 또는 실제 기기
- iOS 시뮬레이터 또는 실제 기기
- 백엔드 서버 (로컬: localhost:8000)
- 또는 개발 서버

---

### 회의 일정

#### 1차 회의: 기획 검토 (기획자 ↔ 개발자)
**일시**: 2026-02-21 (목) 10:00~11:00
**참석**: 기획자, 개발자
**안건**:
- [ ] F-1 기획서 검토
- [ ] Wireframe 확인
- [ ] 각 화면 요구사항 명확화
- [ ] API 명세 (백엔드와 동일한가?)
- [ ] 개발 예상 일정
- [ ] 질문사항 해결

**산출물**: 최종 확인된 기획서

---

#### 2차 회의: 테스트 케이스 리뷰 (기획자 ↔ 테스터)
**일시**: 2026-02-23 (일) 10:00~11:00
**참석**: 기획자, 테스터
**안건**:
- [ ] 테스트 케이스 (20개) 검토
- [ ] 인수 기준 최종 확인
- [ ] 테스트 환경 준비
- [ ] 테스트 데이터 확인

**산출물**: 최종 테스트 케이스 (20개)

---

#### 3차 회의: 일일 스탠드업 (전체)
**일시**: 매일 16:00 (2/22, 2/23, 2/24, 2/25)
**참석**: 기획자, 개발자, 테스터
**안건**:
- [ ] 어제 완료: 뭘 했는가?
- [ ] 오늘 계획: 뭘 할 것인가?
- [ ] 장애물: 막혀있는 게 뭔가?
- [ ] 정해진 시간: 15분 이내

---

#### 4차 회의: 최종 검증 (전체)
**일시**: 2026-02-25 (화) 15:00~16:00
**참석**: 기획자, 개발자, 테스터
**안건**:
- [ ] 모든 기능 정상 작동 확인
- [ ] 모든 테스트 케이스 통과
- [ ] 최종 승인
- [ ] 버그 리스트 정리
- [ ] 다음 Phase (F-2) 계획

**산출물**: 최종 검증 리포트

---

## 📁 파일 구조 및 변경사항

### 신규 파일 생성

```
lib/modules/auth/
├── screens/
│   └── phone_otp_screen.dart       ⏳ 새로 생성
├── models/
│   ├── send_otp_response.dart      ⏳ 새로 생성
│   └── verify_otp_response.dart    ⏳ 새로 생성
└── auth_module.dart                ⏳ export 파일
```

### 기존 파일 수정

```
lib/modules/auth/
├── screens/
│   ├── splash_screen.dart          ✅ 수정
│   ├── onboarding_screen.dart      ✅ 수정
│   └── social_login_screen.dart    ✅ 수정
├── services/
│   └── auth_service.dart           ✅ 수정
├── providers/
│   └── auth_provider.dart          ✅ 수정
└── models/
    └── user_model.dart             ✅ 수정

pubspec.yaml
├── shared_preferences              ✅ 추가
└── (기타 의존성)

lib/routes/
└── app_router.dart                 ✅ 수정 (라우트 추가)
```

---

## 🚀 일정 상세

### 2026-02-22 (금) - 화면 UI 개선

| 시간 | 작업 | 담당 | 상태 |
|------|------|------|------|
| 09:00 | 일일 미팅 | 전체 | 예정 |
| 09:15 | SplashScreen 수정 | 개발자 | ⏳ |
| 10:00 | OnboardingScreen 수정 | 개발자 | ⏳ |
| 11:00 | SocialLoginScreen 수정 | 개발자 | ⏳ |
| 12:00 | 점심 | - | - |
| 13:00 | 코드 리뷰 | 전체 | ⏳ |
| 16:00 | 일일 스탠드업 | 전체 | ⏳ |

**목표**: 3개 화면 UI 완성

---

### 2026-02-23 (일) - 새 화면 구현

| 시간 | 작업 | 담당 | 상태 |
|------|------|------|------|
| 09:00 | 일일 미팅 | 전체 | 예정 |
| 09:15 | PhoneOtpScreen 생성 | 개발자 | ⏳ |
| 11:15 | 테스트 케이스 리뷰 | 기획자+테스터 | ⏳ |
| 12:00 | 점심 | - | - |
| 13:00 | PhoneOtpScreen 계속 | 개발자 | ⏳ |
| 15:00 | 완료 | 개발자 | ⏳ |
| 16:00 | 일일 스탠드업 | 전체 | ⏳ |

**목표**: PhoneOtpScreen 완성

---

### 2026-02-24 (월) - API 연동

| 시간 | 작업 | 담당 | 상태 |
|------|------|------|------|
| 09:00 | 일일 미팅 | 전체 | 예정 |
| 09:15 | AuthService 수정 | 개발자 | ⏳ |
| 11:00 | Response 모델 생성 | 개발자 | ⏳ |
| 12:00 | 점심 | - | - |
| 13:00 | 통합 테스트 | 개발자 | ⏳ |
| 14:00 | 테스터가 테스트 시작 | 테스터 | ⏳ |
| 16:00 | 일일 스탠드업 | 전체 | ⏳ |

**목표**: API 연동 완료, 초기 테스트

---

### 2026-02-25 (화) - 마무리

| 시간 | 작업 | 담당 | 상태 |
|------|------|------|------|
| 09:00 | 일일 미팅 | 전체 | 예정 |
| 09:15 | 에러 처리 개선 | 개발자 | ⏳ |
| 11:00 | 버그 픽스 | 개발자 | ⏳ |
| 12:00 | 점심 | - | - |
| 13:00 | 최종 테스트 | 테스터 | ⏳ |
| 14:00 | 코드 리뷰 | 전체 | ⏳ |
| 15:00 | 최종 검증 미팅 | 전체 | ⏳ |
| 16:00 | 스프린트 종료 | 전체 | ⏳ |

**목표**: F-1 완료 ✅

---

## 📋 체크리스트

### 개발자 완료 기준
- [ ] 4개 화면 모두 구현
- [ ] API 연동 정상
- [ ] 토큰 저장/로드 정상
- [ ] 에러 처리 완전
- [ ] 로딩 상태 표시
- [ ] 주석 + docstring 작성
- [ ] Dart 포맷 검사 (flutter format)
- [ ] Lint 검사 (flutter analyze)

### 테스터 완료 기준
- [ ] 20개 테스트 케이스 모두 작성
- [ ] 20개 케이스 모두 통과
- [ ] 성능 테스트 (앱 실행 시간 < 3초)
- [ ] 에러 테스트 (모든 에러 처리됨)
- [ ] 버그 리스트 작성
- [ ] 최종 검증 리포트 작성

### 기획자 완료 기준
- [ ] 기획서 최종 검토 완료
- [ ] 모든 인수 기준 충족 확인
- [ ] 테스터 리포트 검수 완료

---

## 🎯 인수 기준 (최종 검증)

### F1-AC-1: 스플래시 화면
- [ ] 로고 표시
- [ ] 2초 로딩
- [ ] 토큰 확인
- [ ] 토큰 있으면 메인 이동
- [ ] 토큰 없으면 온보딩 이동

### F1-AC-2: 온보딩 화면
- [ ] 3개 페이지
- [ ] 페이지 인디케이터
- [ ] [다음], [건너뛰기] 버튼
- [ ] 로그인 화면으로 이동

### F1-AC-3: 로그인 화면
- [ ] 카카오 로그인 버튼
- [ ] 휴대폰 로그인 버튼
- [ ] 로딩 상태 표시
- [ ] 에러 메시지 표시

### F1-AC-4: OTP 입력 화면
- [ ] 휴대폰 입력 필드
- [ ] [OTP 받기] 버튼
- [ ] OTP 입력 필드
- [ ] 3분 타이머
- [ ] [확인] 버튼
- [ ] 토큰 저장
- [ ] 메인 화면 이동

### F1-AC-5: 상태 관리
- [ ] AuthProvider 관리
- [ ] 토큰 저장 (SharedPreferences)
- [ ] 토큰 로드
- [ ] 앱 재시작 후 유지

---

## 🔄 커밋 메시지 규칙

```
[F][F1-{Task}] 설명

예:
[F][F1-1] SplashScreen 토큰 확인 로직 추가
[F][F1-2] OnboardingScreen 페이지 플로우 완성
[F][F1-3] SocialLoginScreen UI 개선
[F][F1-4] PhoneOtpScreen 새로 생성 (휴대폰+OTP 입력)
[F][F1-5] AuthService API 연동
[F][F1-6] 에러 처리 및 코드 개선
[F][F1-TEST] 로그인 전체 흐름 테스트 케이스
```

---

## 📞 주의사항

### 백엔드 의존성
- ⚠️ **A-5 (장비 API) 완료까지 기다려야 함**
- ⚠️ 현재는 A-4 (인증 API) 연동만 가능
- ✅ A-4는 이미 완료되었으므로 바로 시작 가능

### 환경 설정
```bash
# 의존성 추가
flutter pub add shared_preferences
flutter pub add http
flutter pub add provider
flutter pub add kakao_flutter_sdk

# 실행
flutter run
```

### 백엔드 연결
```dart
// 로컬 개발
const String API_BASE = 'http://10.0.2.2:8000/api/v1';  // Android
const String API_BASE = 'http://localhost:8000/api/v1';   // iOS

// 개발 서버
const String API_BASE = 'https://dev-api.danngam.com/api/v1';
```

---

## 🏆 성공 기준

**스프린트 F-1 완료 = 다음과 같은 상태**

```
✅ 사용자가 앱을 실행
  ↓
✅ 스플래시 화면 (2초)
  ↓
✅ 온보딩 화면 (이미지 + 텍스트)
  ↓
✅ 로그인 화면 (카카오 또는 휴대폰)
  ↓
✅ 휴대폰 입력 → OTP 받기 (API 호출)
  ↓
✅ OTP 입력 → 확인 (API 호출)
  ↓
✅ 토큰 저장 + 메인 화면 진입
  ↓
✅ 앱 재시작 → 토큰 확인 → 메인 화면 바로 진입
```

---

**팀장**: 기획자
**작성일**: 2026-02-15
**버전**: 1.0.0
**상태**: 스프린트 F-1 준비 완료 ✅
