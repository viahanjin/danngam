# Danngam 화면 플로우 및 네비게이션 설계서

## 1. 문서 정보

- **프로젝트명**: Danngam (농기계 공유 플랫폼)
- **문서버전**: v1.1
- **작성일**: 2026-02-14
- **최종 수정**: 2026-02-14
- **목적**: 화면 구조, 네비게이션, 사용자 플로우 정의 (13개 화면)
- **대상 플랫폼**: iOS (Swift) / Android (Kotlin) / Flutter

---

## 2. 전체 화면 구조 (Screen Tree)

### 2.1 전체 네비게이션 맵

```
애플리케이션
├── 인증 플로우 (AuthStack)
│   ├── SplashScreen (시작 화면)
│   ├── OnboardingScreen (앱 소개)
│   └── LoginScreen (로그인/OTP)
│
└── 메인 플로우 (MainStack)
    ├── MainScreen (홈 화면)
    │   ├── 이동형 장비 탭
    │   ├── 고정형 장비 탭
    │   └── 검색/필터
    │
    ├── EquipmentDetailScreen (장비 상세)
    │   └── 예약 버튼
    │
    ├── EquipmentRegistrationScreen (장비 등록) ★ 신규
    │   ├── 이미지 선택
    │   ├── 기본정보 입력
    │   ├── 위치 설정 (지도)
    │   ├── 가격 설정
    │   └── 등록 완료
    │
    ├── MapSearchScreen (지도 검색) ★ 신규
    │   ├── 지도 표시
    │   ├── 마커/클러스터링
    │   └── 필터
    │
    ├── ChatScreen (채팅 목록) ★ 신규
    │   └── 1:1 채팅
    │
    ├── ChatDetailScreen (채팅 상세) ★ 신규
    │   ├── 메시지 목록
    │   └── 메시지 입력
    │
    ├── BookingScreen (예약 화면)
    │   ├── 달력/시간 선택
    │   └── 가격 계산
    │
    ├── PaymentScreen (결제 화면)
    │   ├── 결제수단 선택
    │   └── 결제 확인
    │
    ├── PaymentSuccessScreen (결제 성공)
    │   └── 확인 버튼
    │
    ├── ProfileScreen (프로필)
    │   ├── 사용자 정보
    │   ├── 예약 탭
    │   └── 리뷰 탭
    │
    └── ReviewScreen (리뷰 작성)
        └── 별점, 댓글 입력
```

---

## 3. Navigation Stack 관리

### 3.1 인증 플로우 Stack (AuthStack)

사용자가 로그인하기 전까지 표시되는 화면들입니다.

```
AuthStack
├── SplashScreen (초기 진입점)
│   └── 로그인 상태 확인 후
│       ├── 로그인됨 → MainStack으로 이동
│       └── 미로그인 → OnboardingScreen
│
├── OnboardingScreen (온보딩)
│   └── "시작하기" 버튼 클릭
│       → LoginScreen
│
└── LoginScreen (로그인)
    └── 전화번호 + OTP 인증 성공
        → MainStack으로 전환
```

### 3.2 메인 플로우 Stack (MainStack)

로그인 이후 메인 기능을 담당하는 화면들입니다.

```
MainStack
├── MainScreen (TabBar)
│   ├── 이동형 장비 탭 (검색, 목록)
│   ├── 고정형 장비 탭 (검색, 목록)
│   └── 프로필 탭 (사용자 정보, 예약, 리뷰)
│
├── DetailStack (상세 정보)
│   ├── EquipmentDetailScreen
│   └── 모달: ReviewListScreen
│
├── BookingStack (예약/결제)
│   ├── BookingScreen
│   ├── PaymentScreen
│   └── PaymentSuccessScreen
│
└── ProfileStack (프로필)
    ├── ProfileScreen
    ├── EditProfileScreen
    ├── BookingDetailScreen
    └── ReviewScreen
```

### 3.3 상세 플로우 Stack (DetailStack)

장비 상세 정보 및 관련 정보를 표시합니다.

```
DetailStack
├── EquipmentDetailScreen
│   └── "예약하기" 버튼 클릭
│       → BookingStack의 BookingScreen으로 이동
│
└── ReviewListScreen (모달)
    └── 리뷰 목록 표시
```

---

## 4. 주요 사용자 플로우

### 4.1 플로우 1: 앱 시작 및 로그인

```
┌─────────────────────────────────────────────────────┐
│ SplashScreen                                        │
│ - 로고 표시                                          │
│ - 로딩 애니메이션                                    │
│ - 로그인 상태 확인 (2초 대기)                        │
└────────────────┬────────────────────────────────────┘
                 │
        ┌────────┴────────┐
        │                 │
   [로그인됨]         [미로그인]
        │                 │
        ▼                 ▼
   MainScreen      OnboardingScreen
                   - 앱 소개 (3페이지)
                   - "시작하기" 버튼
                        │
                        ▼
                   LoginScreen
                   - 전화번호 입력
                   - OTP 발송 버튼
                        │
                        ▼
                   OTP 입력 화면
                   - 6자리 코드
                   - 확인 버튼
                        │
        ┌───────────────┘
        │
        ▼
   약관 동의 (2개)
   - 서비스 이용약관
   - 개인정보 수집 동의
        │
        ▼
   로그인 완료
        │
        ▼
   MainScreen
```

---

### 4.2 플로우 2: 장비 검색 및 예약

```
┌──────────────────────────────────────────────────────────────┐
│ MainScreen                                                   │
│ - 탭 선택: [이동형 장비] 또는 [고정형 장비]                   │
│ - SearchBar (키워드 입력)                                    │
│ - FilterButton (거리: 30km, 가격: 무관, 평점: 3점 이상)      │
│ - EquipmentCard 목록 (스크롤)                                │
└─────────┬──────────────────────────────────────────────────┘
          │
          │ (카드 클릭)
          ▼
┌──────────────────────────────────────────────────────────────┐
│ EquipmentDetailScreen                                        │
│ ┌─ 이미지 슬라이더 (좌우 스와이프)                            │
│ ├─ 장비 정보                                                  │
│ │  • 이름: "트랙터 80마력"                                    │
│ │  • 타입: 이동형                                             │
│ │  • 범주: TRACTOR                                            │
│ │  • 공급자: 이농부 (★ 4.8)                                  │
│ │  • 가격: 일일 150,000원                                     │
│ ├─ 평가 및 리뷰 (상단 5개만, "모두보기" 링크)                 │
│ ├─ 공급자 정보 (이름, 평점, 전화번호 마스킹)                 │
│ └─ [예약하기] 버튼 (녹색, 고정)                              │
└─────────┬──────────────────────────────────────────────────┘
          │
          │ (예약하기 클릭)
          ▼
┌──────────────────────────────────────────────────────────────┐
│ BookingScreen                                                │
│ ┌─ 장비 요약 (이미지 + 이름 + 가격)                           │
│ ├─ [달력 선택]                                               │
│ │  • 시작 날짜 선택                                           │
│ │  • 종료 날짜 선택                                           │
│ │  • 예약 불가 날짜 표시 (회색)                              │
│ ├─ [시간 선택] (이동형만)                                     │
│ │  • 시작 시간 (08:00 ~ 18:00)                               │
│ │  • 종료 시간                                               │
│ ├─ 가격 계산 표시                                             │
│ │  • 일일 가격 × 일수                                         │
│ │  • 수수료 8%                                                │
│ │  • 합계                                                      │
│ └─ [결제 진행] 버튼                                           │
└─────────┬──────────────────────────────────────────────────┘
          │
          │ (결제 진행 클릭)
          ▼
┌──────────────────────────────────────────────────────────────┐
│ PaymentScreen                                                │
│ ┌─ 결제 수단 선택                                             │
│ │  • [ ] 신용/체크카드                                        │
│ │  • [ ] 계좌이체                                             │
│ │  • [ ] 간편결제 (카카오페이, 네이버페이, PAYCO)            │
│ ├─ 주문 요약                                                  │
│ │  • 장비: 트랙터 80마력                                      │
│ │  • 기간: 2026-02-15 ~ 2026-02-17 (2일)                    │
│ │  • 가격: 300,000원 + 수수료 24,000원 = 324,000원           │
│ └─ [결제] 버튼                                               │
└─────────┬──────────────────────────────────────────────────┘
          │
          │ (결제 완료)
          ▼
┌──────────────────────────────────────────────────────────────┐
│ PaymentSuccessScreen                                         │
│ ├─ ✓ 성공 메시지                                              │
│ ├─ 예약 번호: DN20260214001                                  │
│ ├─ 예약 정보 요약                                             │
│ └─ [확인] 버튼 → MainScreen으로 이동                         │
└──────────────────────────────────────────────────────────────┘
```

---

### 4.3 플로우 3: 리뷰 작성

```
┌──────────────────────────────────────────────────────────────┐
│ ProfileScreen                                                │
│ ├─ 사용자 정보                                                │
│ ├─ [예약] 탭 (선택됨)                                        │
│ │  • 예약 상태: [진행중] [완료]                              │
│ │  • 예약 카드 목록                                           │
│ │    - 트랙터 80마력 (2026-02-15 ~ 17)                      │
│ │      상태: [완료] [리뷰 작성] 버튼                         │
│ └─ [리뷰] 탭                                                  │
│    • 작성한 리뷰 목록                                         │
└─────────┬──────────────────────────────────────────────────┘
          │
          │ ([리뷰 작성] 버튼 클릭)
          ▼
┌──────────────────────────────────────────────────────────────┐
│ ReviewScreen                                                 │
│ ├─ 장비 정보 (이미지 + 이름 + 공급자)                         │
│ ├─ [별점 선택]                                               │
│ │  • ★ ★ ★ ★ ☆ (1~5점 선택 가능)                           │
│ ├─ [댓글 입력]                                               │
│ │  • 입력 필드 (최소 10자, 최대 500자)                      │
│ ├─ 옵션                                                       │
│ │  • [ ] 익명 리뷰 (공급자 정보 비공개)                       │
│ └─ [작성 완료] 버튼                                          │
└─────────┬──────────────────────────────────────────────────┘
          │
          │ (작성 완료 시)
          ▼
┌──────────────────────────────────────────────────────────────┐
│ ProfileScreen (리뷰 탭)                                       │
│ • 작성한 리뷰 목록에 새 리뷰 추가됨                           │
└──────────────────────────────────────────────────────────────┘
```

---

### 4.4 플로우 4: 프로필 수정

```
┌──────────────────────────────────────────────────────────────┐
│ ProfileScreen                                                │
│ ├─ 프로필 이미지 + 사용자 이름                                 │
│ ├─ 평점 및 리뷰 수                                            │
│ ├─ [프로필 수정] 버튼                                        │
│ └─ ...                                                        │
└─────────┬──────────────────────────────────────────────────┘
          │
          │ ([프로필 수정] 버튼 클릭)
          ▼
┌──────────────────────────────────────────────────────────────┐
│ EditProfileScreen                                            │
│ ├─ [프로필 이미지 변경]                                      │
│ │  • 현재 이미지 표시                                         │
│ │  • 카메라 또는 앨범에서 선택                                 │
│ ├─ [이름 수정]                                               │
│ │  • 텍스트 필드                                              │
│ ├─ [지역 선택]                                               │
│ │  • 시/도 선택 (경기도, 전라도 등)                           │
│ │  • 시/군/구 선택                                            │
│ └─ [저장] 버튼                                               │
└─────────┬──────────────────────────────────────────────────┘
          │
          │ (저장 완료)
          ▼
┌──────────────────────────────────────────────────────────────┐
│ ProfileScreen (업데이트됨)                                    │
│ • 수정된 정보 표시                                            │
└──────────────────────────────────────────────────────────────┘
```

---

### 4.5 플로우 5: 장비 등록 (신규)

```
┌──────────────────────────────────────────────────────────────┐
│ MainScreen 또는 ProfileScreen                                │
│ [장비 등록] 버튼                                              │
└─────────┬──────────────────────────────────────────────────┘
          │
          ▼
┌──────────────────────────────────────────────────────────────┐
│ EquipmentRegistrationScreen - Step 1: 이미지 선택            │
│ ├─ [카메라] 또는 [앨범에서 선택]                             │
│ ├─ 선택된 이미지 미리보기                                    │
│ └─ [다음] 버튼                                              │
└─────────┬──────────────────────────────────────────────────┘
          │
          ▼
┌──────────────────────────────────────────────────────────────┐
│ EquipmentRegistrationScreen - Step 2: 기본정보 입력          │
│ ├─ [장비 이름]                                               │
│ │  예: "트랙터 80마력"                                       │
│ ├─ [카테고리 선택]                                           │
│ │  라디오: 이동형 / 고정형                                   │
│ ├─ [세부 카테고리]                                           │
│ │  드롭다운: 트랙터, 콤바인, 건조기 등                       │
│ ├─ [설명]                                                    │
│ │  텍스트: 최소 50자, 최대 500자                             │
│ └─ [다음] 버튼                                              │
└─────────┬──────────────────────────────────────────────────┘
          │
          ▼
┌──────────────────────────────────────────────────────────────┐
│ EquipmentRegistrationScreen - Step 3: 위치 설정 (지도)       │
│ ├─ [지도 보기]                                               │
│ │  • 현재 위치 기반 마커 표시                                │
│ │  • 핀 드래그로 위치 변경                                   │
│ ├─ [주소]                                                    │
│ │  읽기 전용 (지도에서 선택하면 자동 입력)                   │
│ │  예: "경기도 여주시 여주대로 315번길"                       │
│ └─ [다음] 버튼                                              │
└─────────┬──────────────────────────────────────────────────┘
          │
          ▼
┌──────────────────────────────────────────────────────────────┐
│ EquipmentRegistrationScreen - Step 4: 가격 설정              │
│ ├─ [일일 가격]                                               │
│ │  입력: "150000"                                            │
│ ├─ [시간 가격] (이동형만)                                    │
│ │  입력: "25000"                                             │
│ ├─ [예약 가능 시간대] (이동형만)                             │
│ │  시작: 08:00, 종료: 18:00                                 │
│ ├─ [공휴일 대여 가능 여부]                                   │
│ │  토글: ON / OFF                                            │
│ └─ [등록 완료] 버튼                                         │
└─────────┬──────────────────────────────────────────────────┘
          │
          ▼
┌──────────────────────────────────────────────────────────────┐
│ 등록 성공 다이얼로그                                          │
│ ├─ "✓ 장비가 등록되었습니다"                                 │
│ ├─ "승인 대기 중입니다 (1-2일)"                               │
│ ├─ 장비 ID: EQ20260214001                                   │
│ └─ [완료] 버튼 → ProfileScreen으로 이동                     │
└──────────────────────────────────────────────────────────────┘
```

---

### 4.6 플로우 6: 지도 검색 (신규)

```
┌──────────────────────────────────────────────────────────────┐
│ MainScreen의 하단 탭                                          │
│ [🗺️ 지도] 탭 클릭                                             │
└─────────┬──────────────────────────────────────────────────┘
          │
          ▼
┌──────────────────────────────────────────────────────────────┐
│ MapSearchScreen                                              │
│ ┌────────────────────────────────────────────────────────┐   │
│ │                                                        │   │
│ │            [🗺️ Naver Map / Google Map]             │   │
│ │                                                        │   │
│ │  ┌─────────────────────────────────────────────────┐  │   │
│ │  │ 📍 현재 위치                                     │  │   │
│ │  │                                                  │  │   │
│ │  │ ○ 마커 1 (트랙터) - 이동형                      │  │   │
│ │  │ ○ 마커 2 (건조기) - 고정형                      │  │   │
│ │  │ ○ 마커 3 (콤바인) - 이동형                      │  │   │
│ │  │ 🔵 클러스터 (15개 장비)                         │  │   │
│ │  │                                                  │  │   │
│ │  └─────────────────────────────────────────────────┘  │   │
│ │                                                        │   │
│ └────────────────────────────────────────────────────────┘   │
│                                                              │
│ [🔍 검색] [⚙️ 필터]                                        │
│                                                              │
│ 필터:                                                         │
│ ├─ 장비 타입: [이동형] [고정형]                             │
│ ├─ 거리: 5km ~ 50km                                        │
│ └─ 평점: 3점 이상                                          │
│                                                              │
├──────────────────────────────────────────────────────────────┤
│ 주변 장비 목록 (지도 하단)                                    │
│ ┌────────────────────────────────────────────────────────┐   │
│ │ [이미지] 트랙터 80마력                                  │   │
│ │ ★★★★☆ 4.8  |  거리: 2.1km                         │   │
│ │ 150,000원/일                                           │   │
│ │ [자세히보기]                                           │   │
│ └────────────────────────────────────────────────────────┘   │
│ ┌────────────────────────────────────────────────────────┐   │
│ │ [이미지] 콤바인 4조식                                   │   │
│ │ ★★★★★ 4.9  |  거리: 3.5km                         │   │
│ │ 200,000원/일                                           │   │
│ │ [자세히보기]                                           │   │
│ └────────────────────────────────────────────────────────┘   │
└──────────────────────────────────────────────────────────────┘
          │
          │ (마커 클릭 또는 목록 클릭)
          ▼
┌──────────────────────────────────────────────────────────────┐
│ EquipmentDetailScreen으로 이동                               │
└──────────────────────────────────────────────────────────────┘
```

---

### 4.7 플로우 7: 채팅 (신규)

```
┌──────────────────────────────────────────────────────────────┐
│ MainScreen 또는 ProfileScreen                                │
│ [💬 채팅] 탭 클릭                                             │
└─────────┬──────────────────────────────────────────────────┘
          │
          ▼
┌──────────────────────────────────────────────────────────────┐
│ ChatScreen - 채팅 목록                                        │
│                                                              │
│ [🔍 검색]                                                   │
│                                                              │
│ 진행중인 채팅 (3개)                                          │
│ ┌────────────────────────────────────────────────────────┐   │
│ │ [프로필 🖼️]  이농부                                    │   │
│ │ "네, 예약 날짜가 맞습니다"                               │   │
│ │ 2026-02-14 14:30  [읽지 않음 1개]                    │   │
│ └────────────────────────────────────────────────────────┘   │
│ ┌────────────────────────────────────────────────────────┐   │
│ │ [프로필 🖼️]  김농부                                    │   │
│ │ "감사합니다!"                                           │   │
│ │ 2026-02-14 10:15                                      │   │
│ └────────────────────────────────────────────────────────┘   │
│ ┌────────────────────────────────────────────────────────┐   │
│ │ [프로필 🖼️]  박농부                                    │   │
│ │ "예약이 확정되었습니다"                                 │   │
│ │ 2026-02-13 16:45                                      │   │
│ └────────────────────────────────────────────────────────┘   │
│                                                              │
│ [➕ 새 채팅 시작]                                             │
└─────────┬──────────────────────────────────────────────────┘
          │
          │ (채팅방 클릭)
          ▼
┌──────────────────────────────────────────────────────────────┐
│ ChatDetailScreen - 1:1 채팅                                   │
├──────────────────────────────────────────────────────────────┤
│ [◀︎]  이농부                            [⋯]                 │ ← Header
│                                                              │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│ 2026-02-14 (오늘)                                            │
│                                                              │
│ ┌────────────────────────────────────────────────────────┐   │
│ │ [상대방]                                               │   │
│ │ "예약해주셨군요!"                                      │   │
│ │ 14:10                                                  │   │
│ └────────────────────────────────────────────────────────┘   │
│                                                              │
│                         ┌────────────────────────────────┐   │
│                         │ [나]                           │   │
│                         │ "네, 잘 부탁합니다"             │   │
│                         │ 14:12                          │   │
│                         └────────────────────────────────┘   │
│                                                              │
│ ┌────────────────────────────────────────────────────────┐   │
│ │ [상대방]                                               │   │
│ │ "네, 예약 날짜가 맞습니다"                              │   │
│ │ 14:30                                                  │   │
│ └────────────────────────────────────────────────────────┘   │
│                                                              │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│ ┌──────────────────────────────────────────────────────────┐ │
│ │ 메시지 입력                                              │ │
│ │ ["안녕하세요"]                        [📎] [😊] [➤]    │ │
│ │                                                        │ │
│ └──────────────────────────────────────────────────────────┘ │
└──────────────────────────────────────────────────────────────┘
```

---

### 4.8 플로우 8: 예약 취소

```
┌──────────────────────────────────────────────────────────────┐
│ ProfileScreen - 예약 탭                                       │
│ ├─ 예약 상태: [진행중]                                       │
│ │  • 트랙터 80마력 (2026-02-20 ~ 22)                        │
│ │  • 상태: 승인됨 (예약 확정)                                 │
│ │  • [취소] 버튼                                             │
│ └─ 예약 상태: [완료]                                         │
│    • 예약 취소 불가                                          │
└─────────┬──────────────────────────────────────────────────┘
          │
          │ ([취소] 버튼 클릭)
          ▼
┌──────────────────────────────────────────────────────────────┐
│ 취소 확인 다이얼로그                                           │
│ ├─ "예약을 취소하시겠습니까?"                                │
│ ├─ "취소 수수료 10%가 부과됩니다"                             │
│ │  • 원가: 300,000원                                         │
│ │  • 취소 수수료: 30,000원                                    │
│ │  • 환불액: 270,000원                                       │
│ └─ [취소하기] [계속 진행] 버튼                                │
└─────────┬──────────────────────────────────────────────────┘
          │
          │ ([취소하기] 클릭)
          ▼
┌──────────────────────────────────────────────────────────────┐
│ 취소 완료 다이얼로그                                           │
│ ├─ "✓ 예약이 취소되었습니다"                                 │
│ ├─ 환불 예상 시간: 1~2일                                     │
│ └─ [확인] 버튼 → ProfileScreen으로 돌아감                    │
└──────────────────────────────────────────────────────────────┘
```

---

## 5. MainScreen 상세 구조

### 5.1 레이아웃 다이어그램

```
┌────────────────────────────────────────────┐
│ MainScreen                                 │
├────────────────────────────────────────────┤
│                                            │
│  [🔍 검색] [⚙️ 필터]  [❤️ 찜]             │  ← SearchBar & Controls
│                                            │
├────────────────────────────────────────────┤
│ [이동형 장비] [고정형 장비]                │  ← TabBar
├────────────────────────────────────────────┤
│                                            │
│  ┌──────────────────────────────────────┐ │
│  │ 트랙터 80마력                          │ │
│  │ [이미지]                               │ │
│  │ ★★★★☆ 4.8 (42 리뷰)               │ │  ← EquipmentCard
│  │ 일일 150,000원                        │ │
│  │ 거리: 5.2km                           │ │
│  └──────────────────────────────────────┘ │
│                                            │
│  ┌──────────────────────────────────────┐ │
│  │ 콤바인 4조식                            │ │
│  │ [이미지]                               │ │
│  │ ★★★★★ 4.9 (28 리뷰)               │ │
│  │ 일일 200,000원                        │ │
│  │ 거리: 8.1km                           │ │
│  └──────────────────────────────────────┘ │
│                                            │
│  ... (더 보기)                             │
│                                            │
├────────────────────────────────────────────┤
│ ← 홈 | 검색 | 찜 | 예약 | 프로필 →      │  ← BottomTabBar
└────────────────────────────────────────────┘
```

### 5.2 UI 컴포넌트 상세

#### SearchBar
- 선택 가능한 텍스트 입력 필드
- 플레이스홀더: "농기계 검색..."
- 우측에 검색 아이콘 (터치 시 검색 실행)

#### FilterButton
- 필터 아이콘
- 클릭 시 필터 Sheet 표시
  - 거리 범위 선택 (5km ~ 100km)
  - 가격 범위 선택 (최저 ~ 최고)
  - 평점 필터 (3점 이상 등)
  - 적용 / 초기화 버튼

#### TabBar (이동형/고정형)
- 2개 탭: [이동형 장비] [고정형 장비]
- 현재 선택 탭 하단에 초록색 바 표시
- 탭 전환 시 스와이프 애니메이션 (또는 페이드)

#### EquipmentCard
- 장비 이미지 (정사각형, 가로길이 = 카드 너비)
- 장비 이름 (1줄, 말줄임)
- 평점 및 리뷰 수
- 일일 가격
- 거리 정보 (이동형만)
- 터치 시 EquipmentDetailScreen으로 이동

#### BottomTabBar
- 5개 탭: 홈 | 검색 | 찜 | 예약 | 프로필
- 현재 선택 탭 강조 (아이콘 + 라벨 강조)
- 각 탭 선택 시 해당 화면으로 이동

---

## 6. 각 화면 상세 정의

### 6.1 SplashScreen

**목적**: 앱 시작 시 표시되는 초기 화면

**구성 요소**:
- Danngam 로고 (중앙)
- 로딩 애니메이션 (스피너 또는 프로그레스 바)
- 배경색: 밝은 녹색 그라데이션

**동작**:
- 2초 후 자동으로 다음 화면으로 이동
- 로그인 상태 확인:
  - 로그인됨: MainScreen
  - 미로그인: OnboardingScreen

**애니메이션**: Fade In (0.5초)

---

### 6.2 OnboardingScreen

**목적**: 앱의 주요 기능 소개

**구성 요소**:
```
페이지 1: 장비 검색
  ┌────────────────────┐
  │    [그림]          │
  │                    │
  │  "농기계를 쉽게    │
  │   찾아보세요"      │
  │                    │
  │  설명 문구...      │
  └────────────────────┘

페이지 2: 예약 및 결제
  ┌────────────────────┐
  │    [그림]          │
  │                    │
  │  "간편한 예약과    │
  │   안전한 결제"     │
  │                    │
  │  설명 문구...      │
  └────────────────────┘

페이지 3: 커뮤니티
  ┌────────────────────┐
  │    [그림]          │
  │                    │
  │  "함께 나누는      │
  │   농부의 경험"     │
  │                    │
  │  설명 문구...      │
  └────────────────────┘
```

**컨트롤**:
- 페이지 인디케이터 (● ○ ○)
- [이전] [다음] 버튼 (마지막 페이지에서는 [시작하기])

**동작**:
- 좌우 스와이프로 페이지 전환
- 마지막 페이지에서 "시작하기" 클릭 → LoginScreen

---

### 6.3 LoginScreen

**목적**: 사용자 인증 (전화번호 + OTP)

**구성 요소**:

```
┌─────────────────────────────────┐
│    Danngam 로그인                 │
├─────────────────────────────────┤
│                                 │
│  [전화번호 입력]                 │
│  ┌─────────────────────────────┐│
│  │ +82 | [ 휴대폰번호 입력 ]    ││
│  └─────────────────────────────┘│
│                                 │
│  [OTP 발송] 버튼 (비활성)         │
│  (유효한 번호 입력 시 활성화)     │
│                                 │
│  or                             │
│                                 │
│  [카카오톡으로 로그인] 버튼     │
│                                 │
├─────────────────────────────────┤
│ 약관 동의                        │
│ □ 서비스 이용약관 (필수)         │
│ □ 개인정보 수집 동의 (필수)     │
│ □ 마케팅 정보 수신 동의 (선택) │
│                                 │
└─────────────────────────────────┘
```

**상태 1: 전화번호 입력**
- 입력 필드: "+82 | [ ]"
- 입력 시 자동으로 하이픈 추가 (예: 010-1234-5678)
- [OTP 발송] 버튼 (유효한 번호 입력 시 활성화)

**상태 2: OTP 입력**
- "OTP가 발송되었습니다. {전화번호}로 수신한 6자리 코드를 입력하세요."
- OTP 입력 필드 (자동 포커스)
  ```
  [ ]  [ ]  [ ]  [ ]  [ ]  [ ]
  ```
- [확인] 버튼
- "코드를 받지 못하셨나요? [재발송] (남은 시간: 2:45)"
- 3회 실패 시 다시 시도 (5분 대기)

**동작**:
- OTP 확인 성공 → 약관 동의 확인
- 약관 동의 후 → MainScreen

---

### 6.4 MainScreen

**목적**: 장비 검색 및 탐색

**상세 레이아웃**:

```
┌────────────────────────────────────────────┐
│ 09:45                              🔋 📶 ✈️ │ ← Status Bar
├────────────────────────────────────────────┤
│ [🔍 검색] [⚙️]                            │ ← SearchBar & Filter
│                                            │
│ [이동형 장비 ✔︎] [고정형 장비]             │ ← TabBar
│                                            │
│ ┌────────────────────────────────────────┐ │
│ │ [이미지 1]                             │ │
│ │ 트랙터 80마력            [❤️]          │ │
│ │ ★★★★☆ 4.8 (42)                    │ │
│ │ 150,000원 / 일           거리: 5.2km  │ │
│ └────────────────────────────────────────┘ │
│                                            │
│ ┌────────────────────────────────────────┐ │
│ │ [이미지 2]                             │ │
│ │ 콤바인 4조식                [❤️]       │ │
│ │ ★★★★★ 4.9 (28)                    │ │
│ │ 200,000원 / 일           거리: 8.1km  │ │
│ └────────────────────────────────────────┘ │
│                                            │
│ ↓ 스크롤 (더 로드)                        │
│                                            │
├────────────────────────────────────────────┤
│ [🏠 홈]  [🔍 검색]  [❤️ 찜]  [📋 예약]  [👤] │ ← BottomTabBar
└────────────────────────────────────────────┘
```

**기능**:
- **이동형/고정형 탭 전환**: 탭 클릭 또는 좌우 스와이프
- **검색**: 키워드 입력 → 실시간 검색 결과
- **필터**: 거리, 가격, 평점 선택 후 목록 갱신
- **찜하기**: 카드의 ❤️ 아이콘 터치 (로그인 필수)
- **스크롤**: 무한 스크롤 (페이지네이션)

---

### 6.5 EquipmentDetailScreen

**목적**: 선택한 장비의 상세 정보 표시

**상세 레이아웃**:

```
┌────────────────────────────────────────────┐
│ 09:45                              🔋 📶 ✈️ │
├────────────────────────────────────────────┤
│ [◀︎]  "장비 상세정보"  [⋯]                  │ ← Header
│                                            │
├────────────────────────────────────────────┤
│                                            │
│  ┌──────────────────────────────────────┐ │
│  │  [이미지 1]         [>]  ●○○○○       │ │ ← 이미지 슬라이더
│  │  (좌우 스와이프로 이동)                  │ │
│  └──────────────────────────────────────┘ │
│                                            │
│  [❤️]  트랙터 80마력                       │ ← 장비 이름 + 찜
│  ★★★★☆ 4.8 (42 리뷰)  |  5.2km        │
│                                            │
│  카테고리: TRACTOR (트랙터)                │
│                                            │
│  "최신형 트랙터로 밭갈이 및 경운에          │
│   최적화되어 있습니다."                     │
│                                            │
├────────────────────────────────────────────┤
│  📋 기본 정보                               │
│  ├─ 제조사: Kubota                         │
│  ├─ 생산연도: 2022년                      │
│  ├─ 상태: 최상 (거의 새것)                │
│  └─ 마력: 80마력                          │
│                                            │
├────────────────────────────────────────────┤
│  💰 가격                                    │
│  ├─ 일일: 150,000원                       │
│  └─ 시간: 25,000원                        │
│                                            │
├────────────────────────────────────────────┤
│  👨 공급자 정보                             │
│  ├─ 이름: 이농부                           │
│  ├─ 평점: 4.8 / 5                         │
│  ├─ 리뷰: 42개                            │
│  ├─ 위치: 경기도 여주시                   │
│  └─ [연락하기] 버튼                       │
│                                            │
├────────────────────────────────────────────┤
│  ⭐ 리뷰 (상단 5개)                         │
│  ┌────────────────────────────────────┐   │
│  │ 김농부  ★★★★★  2026-02-10         │   │
│  │ "정말 좋은 장비입니다.               │   │
│  │  추천합니다!"                         │   │
│  └────────────────────────────────────┘   │
│  ... (3개 더)                              │
│  [모든 리뷰 보기 (42) →]                   │
│                                            │
├────────────────────────────────────────────┤
│  [예약하기] 버튼 (고정, 녹색)             │
│                                            │
└────────────────────────────────────────────┘
```

**상호작용**:
- **이미지 슬라이더**: 좌우 스와이프로 다음/이전 이미지
- **찜하기**: ❤️ 아이콘 (채우기/해제)
- **모든 리뷰 보기**: 클릭 시 ReviewListModal 표시
- **공급자 연락**: 전화 호출 또는 메시지
- **예약하기**: BookingScreen으로 이동

---

### 6.6 BookingScreen

**목적**: 예약 날짜, 시간, 가격 확인 및 결제 진행

**상세 레이아웃**:

```
┌────────────────────────────────────────────┐
│ [◀︎]  "예약하기"                           │
├────────────────────────────────────────────┤
│                                            │
│  ┌──────────────────────────────────────┐ │
│  │ [이미지]  트랙터 80마력               │ │ ← 장비 요약
│  │ 150,000원 / 일                        │ │
│  └──────────────────────────────────────┘ │
│                                            │
├────────────────────────────────────────────┤
│  📅 대여 날짜                               │
│  시작 날짜                                 │
│  ┌─────────────────────────────────────┐ │
│  │  2026년 2월                          │ │
│  │  월  화  수  목  금  토  일            │
│  │  1   2   3   4   5   6   7         │ │
│  │  8   9  10  11  12  13  14  ← 오늘 │
│  │ 15  16  17  18  19  20  21         │ │
│  │ 22  23  24  25  26  27  28         │ │
│  │ (회색: 예약불가, 파란색: 선택)      │ │
│  └─────────────────────────────────────┘ │
│                                            │
│  종료 날짜                                 │
│  ┌─────────────────────────────────────┐ │
│  │  (시작 날짜 선택 후 표시)             │ │
│  └─────────────────────────────────────┘ │
│                                            │
│  선택된 날짜: 2026-02-15 ~ 2026-02-17 (2일) │
│                                            │
├────────────────────────────────────────────┤
│  🕐 대여 시간 (이동형만)                    │
│  시작 시간                                 │
│  ┌──────────────────────────────────────┐│
│  │ [08:00 ▼]                            ││
│  └──────────────────────────────────────┘│
│  종료 시간                                 │
│  ┌──────────────────────────────────────┐│
│  │ [16:00 ▼]                            ││
│  └──────────────────────────────────────┘│
│                                            │
├────────────────────────────────────────────┤
│  💰 가격 계산                               │
│  ├─ 일일 가격:       150,000원 × 2일    │
│  │                  = 300,000원         │
│  ├─ 수수료 (8%):      24,000원         │
│  ├─ ─────────────────────────────      │
│  └─ 총액:           324,000원          │
│                                            │
│  [ ] 추가 요청사항:                        │
│  ┌──────────────────────────────────────┐│
│  │ "조심스럽게 다루어 주세요"             ││
│  └──────────────────────────────────────┘│
│                                            │
├────────────────────────────────────────────┤
│  [결제 진행] 버튼 (녹색, 고정)            │
│                                            │
└────────────────────────────────────────────┘
```

**기능**:
- **달력 선택**: 터치 시 DatePicker 표시
  - 시작/종료 날짜 자동 계산
  - 예약 불가 날짜는 회색으로 표시
- **시간 선택** (이동형만): 드롭다운 선택
- **가격 자동 계산**: 날짜/시간 변경 시 즉시 업데이트
- **결제 진행**: PaymentScreen으로 이동

---

### 6.7 PaymentScreen

**목적**: 결제 수단 선택 및 결제 실행

**상세 레이아웃**:

```
┌────────────────────────────────────────────┐
│ [◀︎]  "결제"                                │
├────────────────────────────────────────────┤
│                                            │
│  💳 결제 수단 선택                          │
│                                            │
│  ┌──────────────────────────────────────┐ │
│  │ ⭕ 신용/체크카드                      │ │
│  │   등록된 카드:                        │ │
│  │   - Visa  ****1234                   │ │
│  │   - 현대카드 ****5678                 │ │
│  │   - [+ 새 카드 추가]                  │ │
│  └──────────────────────────────────────┘ │
│                                            │
│  ┌──────────────────────────────────────┐ │
│  │ ◯ 계좌이체                            │ │
│  │   선택 시 은행 선택                    │ │
│  │   [은행 선택 ▼]                       │ │
│  └──────────────────────────────────────┘ │
│                                            │
│  ┌──────────────────────────────────────┐ │
│  │ ◯ 간편결제                            │ │
│  │   [카카오페이] [네이버페이] [PAYCO] │ │
│  └──────────────────────────────────────┘ │
│                                            │
├────────────────────────────────────────────┤
│  📋 주문 요약                               │
│  ├─ 장비: 트랙터 80마력                    │
│  ├─ 기간: 2026-02-15 ~ 17 (2일)         │
│  ├─ 시간: 08:00 ~ 16:00                 │
│  ├─ 가격: 324,000원                      │
│  └─ 공급자: 이농부                        │
│                                            │
│  ─────────────────────────────────────    │
│  최종 결제액: 324,000원                   │
│                                            │
│  [ ] 결제 정보 저장 (다음 결제 시 사용)    │
│                                            │
├────────────────────────────────────────────┤
│  [결제] 버튼 (활성 / 비활성)              │
│                                            │
└────────────────────────────────────────────┘
```

**동작**:
- **결제 수단 선택**: 라디오 버튼
  - 신용카드 선택 시 등록된 카드 목록 표시
  - 계좌이체 선택 시 은행 선택 드롭다운 표시
  - 간편결제 선택 시 PG사 로고 버튼 표시
- **결제 실행**: [결제] 버튼 클릭
  - 결제 처리 중... (로딩)
  - 성공 → PaymentSuccessScreen
  - 실패 → 에러 메시지 + 재시도

---

### 6.8 PaymentSuccessScreen

**목적**: 결제 성공 확인 및 다음 단계 안내

**상세 레이아웃**:

```
┌────────────────────────────────────────────┐
│                                            │
│                  ✓                         │
│             (큰 체크 아이콘)                │
│                                            │
│        "결제가 완료되었습니다"              │
│                                            │
├────────────────────────────────────────────┤
│                                            │
│  예약 번호                                 │
│  DN20260214001                             │
│                                            │
│  예약 정보                                 │
│  ├─ 장비: 트랙터 80마력                   │
│  ├─ 공급자: 이농부                        │
│  ├─ 기간: 2026-02-15 ~ 17                │
│  ├─ 시간: 08:00 ~ 16:00                 │
│  ├─ 가격: 324,000원                      │
│  └─ 상태: 예약 확정됨                     │
│                                            │
│  ─────────────────────────────────────    │
│                                            │
│  다음 단계                                 │
│  1. 공급자가 예약을 승인할 때까지 대기     │
│  2. 예약 시간 전에 공급자와 연락          │
│  3. 장비 수령 및 사용                      │
│                                            │
│  [공급자 연락하기] 버튼                    │
│  [예약 상세 보기] 버튼                    │
│                                            │
├────────────────────────────────────────────┤
│  [완료] 버튼 (메인 화면으로)              │
│                                            │
└────────────────────────────────────────────┘
```

**애니메이션**: 체크 아이콘 등장 (0.5초), Bounce 효과

**동작**:
- **공급자 연락하기**: 전화 또는 메시지
- **예약 상세 보기**: BookingDetailScreen으로 이동
- **완료**: MainScreen으로 돌아감

---

### 6.9 ProfileScreen

**목적**: 사용자 프로필, 예약 이력, 리뷰 관리

**상세 레이아웃**:

```
┌────────────────────────────────────────────┐
│ 09:45                              🔋 📶 ✈️ │
├────────────────────────────────────────────┤
│                                            │
│  ┌──────────────────────────────────────┐ │
│  │ [프로필 이미지]                       │ │
│  │    👤                                 │ │
│  │                                       │ │
│  │  김농부                               │ │
│  │  010-****-1234                        │ │
│  │  경기도 여주시                       │ │
│  │                                       │ │
│  │  ★★★★★ 4.7 / 5.0                │ │
│  │  완료 예약: 28  리뷰: 12  찜: 5    │ │
│  │                                       │ │
│  │  [프로필 수정] [로그아웃]             │ │
│  └──────────────────────────────────────┘ │
│                                            │
├────────────────────────────────────────────┤
│  [예약]  [리뷰]  [찜]                      │ ← 탭
│                                            │
│  예약 목록                                 │
│                                            │
│  📌 진행중 (1개)                          │
│  ┌──────────────────────────────────────┐ │
│  │ [이미지] 콤바인 4조식                │ │
│  │ 2026-02-20 ~ 22 (2일)             │ │
│  │ 상태: 공급자 승인 대기중             │ │
│  │ [취소] [상세보기]                   │ │
│  └──────────────────────────────────────┘ │
│                                            │
│  ✓ 완료 (27개)                           │
│  ┌──────────────────────────────────────┐ │
│  │ [이미지] 트랙터 80마력               │ │
│  │ 2026-02-15 ~ 17 (2일)             │ │
│  │ 상태: 예약 완료                      │ │
│  │ [리뷰 작성] [상세보기]               │ │
│  └──────────────────────────────────────┘ │
│  ... (더 보기)                             │
│                                            │
├────────────────────────────────────────────┤
│ [🏠 홈]  [🔍 검색]  [❤️ 찜]  [📋 예약] [👤] │
└────────────────────────────────────────────┘
```

**탭 상세**:

#### [예약] 탭
- 진행중 예약 (파란색)
  - 예약 수락 대기 / 예약 확정 / 진행중
  - [취소] 버튼 (예약 수락 전까지만)
- 완료 예약 (회색)
  - [리뷰 작성] 버튼 (리뷰 미작성인 경우)
  - [리뷰 보기] 버튼 (리뷰 작성한 경우)

#### [리뷰] 탭
```
작성한 리뷰 (12개)
┌────────────────────────────────────────┐
│ [이미지] 트랙터 80마력                  │
│ ★★★★★ 2026-02-17                   │
│ "정말 좋은 장비입니다. 추천합니다!"    │
│ [삭제]                                  │
└────────────────────────────────────────┘
... (더 보기)
```

#### [찜] 탭
```
찜한 장비 (5개)
┌────────────────────────────────────────┐
│ [이미지] 콤바인 4조식                   │
│ ★★★★★ 4.9 (28)                    │
│ 거리: 8.1km                             │
│ [❤️ 찜 해제] [예약하기]                │
└────────────────────────────────────────┘
... (더 보기)
```

---

### 6.10 EquipmentRegistrationScreen (신규)

**목적**: 사용자가 소유한 장비를 플랫폼에 등록

**구성 (다단계 폼)**:

#### Step 1: 이미지 선택
```
┌────────────────────────────────────────┐
│ [◀︎]  "장비 등록" (1/4)                │
├────────────────────────────────────────┤
│                                        │
│  장비 이미지                            │
│  ┌────────────────────────────────────┐│
│  │                                    ││
│  │  [📷 카메라] 또는 [📁 앨범]        ││
│  │                                    ││
│  │  또는                              ││
│  │                                    ││
│  │  드래그 & 드롭                     ││
│  │                                    ││
│  └────────────────────────────────────┘│
│                                        │
│  최대 5개 이미지 업로드 가능             │
│                                        │
├────────────────────────────────────────┤
│  [다음]  (이미지 선택 후 활성화)        │
└────────────────────────────────────────┘
```

#### Step 2: 기본정보 입력
```
┌────────────────────────────────────────┐
│ [◀︎]  "장비 등록" (2/4)                │
├────────────────────────────────────────┤
│                                        │
│  장비 이름                             │
│  ┌────────────────────────────────────┐│
│  │ [예: 트랙터 80마력]                ││
│  └────────────────────────────────────┘│
│                                        │
│  장비 타입                             │
│  ○ 이동형  ○ 고정형                   │
│                                        │
│  카테고리                              │
│  [트랙터 ▼]                            │
│  (이동형: 트랙터, 콤바인, 임플 등)     │
│  (고정형: 건조기, 저장고, 정미기 등)   │
│                                        │
│  상세 설명 (최소 50자, 최대 500자)     │
│  ┌────────────────────────────────────┐│
│  │ "최신형 트랙터로 밭갈이 및 경운에  ││
│  │  최적화되어 있습니다. 정기적인      ││
│  │  유지보수를 받고 있으며..."        ││
│  │ (245 / 500)                        ││
│  └────────────────────────────────────┘│
│                                        │
├────────────────────────────────────────┤
│  [이전]  [다음]                        │
└────────────────────────────────────────┘
```

#### Step 3: 위치 설정 (지도)
```
┌────────────────────────────────────────┐
│ [◀︎]  "장비 등록" (3/4)                │
├────────────────────────────────────────┤
│                                        │
│  위치 설정                             │
│  ┌────────────────────────────────────┐│
│  │  [🗺️ Naver Map / Google Map]     ││
│  │                                    ││
│  │  📍 현재 위치 (핀 드래그 가능)    ││
│  │                                    ││
│  │  [내 위치 찾기] 버튼                ││
│  └────────────────────────────────────┘│
│                                        │
│  주소                                  │
│  ┌────────────────────────────────────┐│
│  │ 경기도 여주시 여주대로 315번길      ││
│  │ (읽기 전용)                        ││
│  └────────────────────────────────────┘│
│                                        │
│  GPS 좌표                              │
│  ┌────────────────────────────────────┐│
│  │ 위도: 37.25634 / 경도: 127.73156  ││
│  └────────────────────────────────────┘│
│                                        │
├────────────────────────────────────────┤
│  [이전]  [다음]                        │
└────────────────────────────────────────┘
```

#### Step 4: 가격 설정
```
┌────────────────────────────────────────┐
│ [◀︎]  "장비 등록" (4/4)                │
├────────────────────────────────────────┤
│                                        │
│  💰 가격 설정                           │
│                                        │
│  일일 대여 가격                         │
│  ┌────────────────────────────────────┐│
│  │ [150000] 원                        ││
│  └────────────────────────────────────┘│
│                                        │
│  시간 대여 가격 (이동형만)              │
│  ┌────────────────────────────────────┐│
│  │ [25000] 원                         ││
│  └────────────────────────────────────┘│
│                                        │
│  예약 가능 시간대 (이동형만)            │
│  시작 시간: [08:00 ▼]                  │
│  종료 시간: [18:00 ▼]                  │
│                                        │
│  [ ] 공휴일 대여 가능                  │
│                                        │
│  추가 옵션                             │
│  ├─ [ ] 배송 가능                      │
│  ├─ [ ] 사용법 교육                    │
│  └─ [ ] 손해보험 포함                  │
│                                        │
├────────────────────────────────────────┤
│  [이전]  [등록 완료]                   │
└────────────────────────────────────────┘
```

**기능**:
- 4단계 프로세스 (진행도 표시)
- 각 단계에서 [이전]/[다음] 네비게이션
- 필수 필드 입력 시에만 [다음] 활성화
- 위치 설정 시 지도 API 사용

---

### 6.11 MapSearchScreen (신규)

**목적**: 지도 기반 장비 검색 및 필터링

**상세 레이아웃**:

```
┌────────────────────────────────────────┐
│ 09:45                            🔋 📶 ✈️│
├────────────────────────────────────────┤
│ [🗺️ 지도 검색]                         │
├────────────────────────────────────────┤
│                                        │
│  [🔍 장비 검색] [⚙️]                  │
│                                        │
│  ┌────────────────────────────────────┐│
│  │                                    ││
│  │        [🗺️ Naver Map]             ││
│  │                                    ││
│  │  📍 현재 위치                       ││
│  │                                    ││
│  │  ○ 마커 1 (트랙터) - 2.1km        ││
│  │  ○ 마커 2 (건조기) - 3.5km        ││
│  │  ○ 마커 3 (콤바인) - 5.2km        ││
│  │  🔵 클러스터 (15개)                 ││
│  │                                    ││
│  │  [확대] [축소]                      ││
│  │  [현재 위치로]                      ││
│  │                                    ││
│  └────────────────────────────────────┘│
│                                        │
│  필터 선택 (Quick Filter)               │
│  [이동형 ✔︎] [고정형]  [거리: 5km]   │
│                                        │
├────────────────────────────────────────┤
│  주변 장비 (스크롤 가능)                 │
│                                        │
│  ┌────────────────────────────────────┐│
│  │ [이미지] 트랙터 80마력              ││
│  │ ★★★★☆ 4.8 (42)  거리: 2.1km   ││
│  │ 150,000원/일                       ││
│  │ 공급자: 이농부                      ││
│  │ [자세히보기]                       ││
│  └────────────────────────────────────┘│
│                                        │
│  ┌────────────────────────────────────┐│
│  │ [이미지] 건조기 (30석)              ││
│  │ ★★★★★ 4.9 (18)  거리: 3.5km   ││
│  │ 80,000원/일                        ││
│  │ 공급자: 김농부                      ││
│  │ [자세히보기]                       ││
│  └────────────────────────────────────┘│
│                                        │
├────────────────────────────────────────┤
│ [🏠 홈] [🔍 검색] [🗺️ 지도] [💬] [👤]│
└────────────────────────────────────────┘
```

**기능**:
- **지도 표시**: Naver Map 또는 Google Map 통합
- **마커 표시**: 장비 위치 마커
- **클러스터링**: 확대 레벨에 따라 마커 그룹핑
- **Quick Filter**: 타입, 거리 등 빠른 필터
- **타입별 마커**: 이동형(파란색), 고정형(녹색)
- **터치 인터렉션**: 마커 클릭 시 상세정보 팝업

---

### 6.12 ChatScreen (신규)

**목적**: 1:1 채팅 목록 표시 및 채팅 관리

**상세 레이아웃**:

```
┌────────────────────────────────────────┐
│ 09:45                            🔋 📶 ✈️│
├────────────────────────────────────────┤
│ 💬 채팅                                 │
├────────────────────────────────────────┤
│                                        │
│  [🔍 채팅 검색]                        │
│                                        │
│  진행중인 채팅 (3)                     │
│                                        │
│  ┌────────────────────────────────────┐│
│  │ [프로필 🖼️]  이농부                ││
│  │ "네, 예약 날짜가 맞습니다"           ││
│  │ 2026-02-14 14:30                  ││
│  │ [읽지 않음 1개] ↗                   ││
│  └────────────────────────────────────┘│
│                                        │
│  ┌────────────────────────────────────┐│
│  │ [프로필 🖼️]  김농부                ││
│  │ "감사합니다!"                       ││
│  │ 2026-02-14 10:15                  ││
│  └────────────────────────────────────┘│
│                                        │
│  ┌────────────────────────────────────┐│
│  │ [프로필 🖼️]  박농부                ││
│  │ "예약이 확정되었습니다"              ││
│  │ 2026-02-13 16:45                  ││
│  └────────────────────────────────────┘│
│                                        │
│  완료된 채팅 (접기/펼치기)              │
│  [▼ 완료 (7)]                          │
│                                        │
├────────────────────────────────────────┤
│                                        │
│  [➕ 새 채팅 시작]                      │
│                                        │
│ [🏠 홈] [🔍] [🗺️] [💬] [👤]         │
└────────────────────────────────────────┘
```

**기능**:
- **채팅 목록**: 최근 순서대로 정렬
- **미읽음 표시**: 읽지 않은 메시지 카운트
- **마지막 메시지 미리보기**: 최근 메시지 표시
- **시간 표시**: 메시지 시간
- **채팅 검색**: 사용자명 또는 메시지 검색
- **스와이프 액션**: 채팅 삭제 또는 핀 고정 (선택사항)

---

### 6.13 ChatDetailScreen (신규)

**목적**: 1:1 채팅 메시지 표시 및 전송

**상세 레이아웃**:

```
┌────────────────────────────────────────┐
│ 09:45                            🔋 📶 ✈️│
├────────────────────────────────────────┤
│ [◀︎]  이농부                      [⋯]    │ ← Header
├────────────────────────────────────────┤
│                                        │
│  2026-02-14 (오늘)                     │
│                                        │
│  ┌────────────────────────────────────┐│
│  │ [상대방 프로필]                      ││
│  │ "예약해주셨군요!"                    ││
│  │ 14:10                              ││
│  └────────────────────────────────────┘│
│                                        │
│                   ┌──────────────────┐ │
│                   │ [나]             │ │
│                   │ "네, 잘 부탁합니다"│ │
│                   │ 14:12            │ │
│                   └──────────────────┘ │
│                                        │
│  ┌────────────────────────────────────┐│
│  │ [상대방]                            ││
│  │ "네, 예약 날짜가 맞습니다"          ││
│  │ 14:30                              ││
│  └────────────────────────────────────┘│
│                                        │
├────────────────────────────────────────┤
│  메시지 입력                            │
│  ┌────────────────────────────────────┐│
│  │ ["메시지를 입력하세요"]            ││
│  │ [📎] [😊] [🎙️] [➤]               ││
│  └────────────────────────────────────┘│
└────────────────────────────────────────┘
```

**기능**:
- **메시지 목록**: 시간 순서대로 표시
- **메시지 구분**: 왼쪽(상대방), 오른쪽(나)
- **타임스탬프**: 각 메시지 시간 표시
- **읽음 표시**: 체크 아이콘 (읽음/안 읽음)
- **메시지 입력**:
  - 텍스트 입력
  - 파일/이미지 첨부 ([📎])
  - 이모지 ([😊])
  - 음성 메시지 ([🎙️])
- **메시지 액션**: 길게 누르면 삭제/복사 옵션
- **자동 스크롤**: 새 메시지 도착 시 자동 스크롤

---

### 6.14 ReviewScreen

**목적**: 완료된 예약에 대한 리뷰 작성

**상세 레이아웃**:

```
┌────────────────────────────────────────────┐
│ [◀︎]  "리뷰 작성"                          │
├────────────────────────────────────────────┤
│                                            │
│  ┌──────────────────────────────────────┐ │
│  │ [이미지]  트랙터 80마력              │ │ ← 장비 정보
│  │ 공급자: 이농부                        │ │
│  │ 예약 기간: 2026-02-15 ~ 17         │ │
│  └──────────────────────────────────────┘ │
│                                            │
├────────────────────────────────────────────┤
│                                            │
│  별점 선택                                 │
│  ★ ★ ★ ★ ☆  (4/5)                      │
│                                            │
│  (터치하여 선택)                           │
│                                            │
├────────────────────────────────────────────┤
│                                            │
│  리뷰 작성                                 │
│  (최소 10자, 최대 500자)                  │
│                                            │
│  ┌──────────────────────────────────────┐ │
│  │ "정말 좋은 장비입니다.               │ │
│  │  공급자분도 친절하셨습니다.           │ │
│  │  다음에 또 이용하고 싶습니다."      │ │
│  │                                      │ │
│  │ (235 / 500)                          │ │
│  └──────────────────────────────────────┘ │
│                                            │
│  [ ] 익명 리뷰로 작성                     │
│  (공급자 정보 비공개)                     │
│                                            │
├────────────────────────────────────────────┤
│  [작성 완료] 버튼                         │
│                                            │
└────────────────────────────────────────────┘
```

**기능**:
- **별점 선택**: 터치하여 1~5점 선택
- **리뷰 작성**: 멀티라인 텍스트 입력
  - 문자 수 카운터 (10~500자)
  - 최소 글자 입력 후 [작성 완료] 활성화
- **익명 리뷰**: 토글 스위치 (선택사항)
- **작성 완료**: ProfileScreen의 [리뷰] 탭으로 이동

---

## 7. Deep Link 전략

### 7.1 Deep Link URI Scheme

```
danngam://equipment/{id}
danngam://equipment/register
danngam://map
danngam://chat
danngam://chat/{userId}
danngam://booking/{id}
danngam://profile
danngam://review/{bookingId}
danngam://payment/{paymentId}
```

### 7.2 예제

**장비 상세 링크**:
```
danngam://equipment/eq_001
→ EquipmentDetailScreen 표시
```

**장비 등록 링크**:
```
danngam://equipment/register
→ EquipmentRegistrationScreen 표시
```

**지도 검색 링크**:
```
danngam://map
→ MapSearchScreen 표시
```

**채팅 목록 링크**:
```
danngam://chat
→ ChatScreen 표시
```

**1:1 채팅 링크**:
```
danngam://chat/user_123
→ ChatDetailScreen 표시 (user_123과의 채팅)
```

**예약 상세 링크**:
```
danngam://booking/book_001
→ BookingDetailScreen 표시
```

**프로필 링크**:
```
danngam://profile
→ ProfileScreen 표시
```

---

## 8. 화면 전환 애니메이션

### 8.1 애니메이션 타입

| 전환 | 애니메이션 | 속도 |
|------|----------|------|
| 로그인 → 메인 | Fade In | 0.5초 |
| 목록 → 상세 | Slide Up | 0.3초 |
| 상세 → 예약 | Slide Left | 0.3초 |
| 예약 → 결제 | Slide Up | 0.3초 |
| 결제 ← 결제성공 | Scale Up | 0.4초 |
| 탭 전환 | Fade | 0.2초 |
| 모달 표시 | Slide Up | 0.3초 |
| 모달 닫기 | Slide Down | 0.3초 |

---

## 9. 상태 복원 (Process Death)

### 9.1 앱 강제 종료 후 복원

**시나리오 1**: MainScreen 표시 중 강제 종료
```
1. 다시 앱 실행
2. SplashScreen에서 로그인 상태 확인
3. 로그인 상태 유지 → MainScreen으로 복원
```

**시나리오 2**: BookingScreen 표시 중 강제 종료
```
1. 다시 앱 실행
2. SplashScreen → MainScreen (메인 화면으로 복원)
3. 사용자가 프로필 탭에서 "[진행중 예약]" 확인
4. [상세보기] → BookingDetailScreen 재입장
```

**시나리오 3**: PaymentScreen 표시 중 강제 종료
```
1. 다시 앱 실행
2. 로그인 상태 유지 + 예약 상태 저장
3. 사용자가 프로필 탭에서 "[진행중 예약]" 확인
4. 상태 확인:
   ├─ 결제 완료: PaymentSuccessScreen 표시
   ├─ 결제 진행 중: "결제를 계속하시겠습니까?" 다이얼로그
   └─ 결제 미완료: 예약이 자동 취소됨 (5분 대기)
```

### 9.2 상태 저장 (SharedPreferences / UserDefaults)

```json
{
  "currentScreen": "MainScreen",
  "lastTabIndex": 0,
  "cachedEquipmentId": "eq_001",
  "cachedBookingId": "book_001",
  "currentLocation": {
    "lat": 37.5,
    "lng": 127.0
  }
}
```

---

## 10. 인수 기준 (Acceptance Criteria)

- [ ] **MainScreen에 이동형/고정형 탭 구조 포함**
  - 탭 전환 가능
  - 각 탭별 장비 필터링 동작

- [ ] **13개 화면 정의** (11 → 13개 확대)
  - ✓ SplashScreen
  - ✓ OnboardingScreen
  - ✓ LoginScreen
  - ✓ MainScreen
  - ✓ EquipmentDetailScreen
  - ✓ EquipmentRegistrationScreen (NEW)
  - ✓ MapSearchScreen (NEW)
  - ✓ ChatScreen (NEW)
  - ✓ ChatDetailScreen (NEW)
  - ✓ BookingScreen
  - ✓ PaymentScreen
  - ✓ PaymentSuccessScreen
  - ✓ ProfileScreen
  - ✓ ReviewScreen
  - (추가) EditProfileScreen, BookingDetailScreen, ReviewListScreen

- [ ] **Navigation Tree 다이어그램 제공**
  - ✓ AuthStack 구조
  - ✓ MainStack 구조
  - ✓ DetailStack 구조

- [ ] **주요 플로우 5개 이상 정의**
  - ✓ 플로우 1: 앱 시작 및 로그인
  - ✓ 플로우 2: 장비 검색 및 예약
  - ✓ 플로우 3: 리뷰 작성
  - ✓ 플로우 4: 프로필 수정
  - ✓ 플로우 5: 예약 취소

---

## 11. 추가 고려사항

### 11.1 접근성 (Accessibility)

- 모든 버튼 최소 44pt × 44pt (터치 타겟)
- 텍스트 명도 비율 4.5:1 이상 (WCAG AA)
- VoiceOver / TalkBack 지원
- 이미지 alt 텍스트 제공

### 11.2 다국어 지원

- 한국어 (기본)
- 영어 (추후)

### 11.3 다크 모드

- 밝은 모드 기본
- 다크 모드 별도 테마 지원

### 11.4 오프라인 모드

- 오프라인 상태: 마지막 캐시 데이터 표시
- 온라인 복구 시 자동 동기화

---

**문서 작성 완료**: 2026-02-14
